# 几个类
* DexPathList
* BaseDexClassLoader
* DexClassLoader
* PathClassLoader
* ClassLoader

## PathClassLoader 与 DexClassLoader区别

	PathClassLoader 只能加载系统指定的路径的class
	
	DexClassLoader 可以加载非系统指定的路径的文件


    PathClassLoader：只能加载已经安装到Android系统中的apk文件（/data/app目录），是Android默认使用的类加载器。

    DexClassLoader：可以加载任意目录下的dex/jar/apk/zip文件，比PathClassLoader更灵活，是实现热修复的重点。

	PathClassLoader与DexClassLoader都继承于BaseDexClassLoader。

	PathClassLoader与DexClassLoader在构造函数中都调用了父类的构造函数，但DexClassLoader多传了一个optimizedDirectory

# 思路

* ClassLoader 加载方案
* Native层替换方案
* 参考Android Studio Instant Run 的思路实现代码整体的增量更新


JVM处理类：

	加载->验证->准备->解析->初始化->使用->卸载



目前较火的热修复方案大致分为两派，分别是：

    阿里系：DeXposed、andfix：从底层二进制入手（c语言）。
    腾讯系：tinker：从java加载机制入手。


热修复方案，一般有如下几个步骤：

    1、下发补丁（内含修复好的class）到用户手机，即让app从服务器上下载（网络传输）
    2、app通过“某种方式”，使补丁中的class被app调用（本地更新）




Android跟java有很大的关系，基于jvm的java应用是通过ClassLoader来加载应用中的class的，但Android对jvm优化过，使用的是dalvik，且class文件会被打包进一个dex文件中，底层虚拟机有所不同，那么它们的类加载器有所区别，在Android中，要加载dex文件中的class文件就需要用到 **PathClassLoader** 或 **DexClassLoader** 这两个Android专用的类加载器。





# 插件化和热修复的概念

    插件化：是将功能代码做成APK的形式，想要让新的代码生效，需要下载APK，加载APK中的新的代码和资源，这个过程需要重启APP，重启之后才能生效。

    	优势：可解决65535方法数问题，可让一个项目多个团队并行开发独立功能。

    热修复：是将新的代码打成jar/dex的形式，也需要下载jar/dex包，然后载入APP，一般来说，一旦载入马上就能生效，无需重启APP。

    	优势：轻量化，对用户透明化，修复起效快。

    共同点：都采用了Java  classloader加载类的原理，以及android 多dex分包原理。


	插件化：一个程序划分为不同的部分，以插件的形式加载到应用中去，本质上它使用的技术还是热修复技术，只是加入了更多工程实践，让它支持大规模的代码更新以及资源和SO包的更新。

	热修复：当线上应用出现紧急BUG，为了避免重新发版，并且保证修复的及时性而进行的一项在线推送补丁的修复方案。